(this.webpackJsonpmoviesearcher=this.webpackJsonpmoviesearcher||[]).push([[0],{189:function(e,t,a){},255:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a(23),r=a.n(c),s=a(8),l=a(9),i=a(114),o=a(115),b=a(262),j=a(26),u=a(259),m=new(a(119).a),d={user:{favouriteMovies:[],watchList:[]},isAuth:!1,session_id:m.get("session_id")||null,account_id:m.get("account_id")||null},h=Object(u.a)({UPDATE_AUTH:function(e){return Object(j.a)({},e)}},d),f=a(51),O={sort_by:"popularity.desc",primary_release_year:(new Date).getFullYear(),with_genres:[],page:1,total_pages:500,language:"ru-RU"},g={auth:h,filters:Object(u.a)({ON_CHANGE_FILTERS:function(e,t){var a=t.payload;return Object(j.a)(Object(j.a)({},e),{},Object(f.a)({},a.name,a.value))},RESET_FILTERS:function(e){return O}},O),form:b.a},p=Object(l.combineReducers)(g),x=Object(l.createStore)(p,Object(o.composeWithDevTools)(Object(l.applyMiddleware)(i.a))),v=(a(188),a(189),a(117)),_=a(10),N=a(34),y=a(261),w=a(257),F=a(260),S=a(258),E=function(e){if(!e)return"\u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435"},k=function(e){if(!(e.length>5))return"\u0414\u043e\u043b\u0436\u043d\u043e \u0431\u044b\u0442\u044c \u043c\u0438\u043d\u0438\u043c\u0443\u043c 5 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0439, \u0438\u043b\u0438 \u0431\u043e\u043b\u044c\u0448\u0435"},C=function(e,t){if(t.repeatPassword!==t.password)return"\u041f\u0430\u0440\u043e\u043b\u0438 \u043d\u0435 \u0438\u0434\u0435\u043d\u0442\u0438\u0447\u043d\u044b"},T=a(2),A=function(e){var t=e.input,a=e.label,n=e.type,c=e.meta;return Object(T.jsxs)("div",{className:"form-group mb-3",children:[Object(T.jsxs)("label",{className:"mb-1",htmlFor:a,children:[a," *"]}),Object(T.jsx)("input",Object(j.a)(Object(j.a)({},t),{},{id:a,placeholder:a,type:n,className:"form-control"})),c.touched&&(c.error&&Object(T.jsx)("p",{className:"invalid-field",children:c.error})||c.warning&&Object(T.jsx)("p",{className:"invalid-field",children:c.warning}))]})};function D(e){var t=e.handleSubmit;return Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)("p",{className:"authorization-form-title",children:"\u0410\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u044f"}),Object(T.jsxs)("form",{onSubmit:t((function(){})),className:"authorization-form",children:[Object(T.jsx)(F.a,{name:"login",component:A,label:"\u041b\u043e\u0433\u0438\u043d",validate:[E,k]}),Object(T.jsx)(F.a,{name:"password",type:"password",component:A,label:"\u041f\u0430\u0440\u043e\u043b\u044c",validate:[E,k]}),Object(T.jsx)(F.a,{name:"repeatPassword",type:"password",component:A,label:"\u041f\u043e\u0432\u0442\u043e\u0440\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c",validate:[E,k,C]}),Object(T.jsx)("button",{type:"submit",className:"btn btn-success w-100 mt-2 mb-3",children:"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c"})]})]})}var R=D=Object(S.a)({form:"AuthorizationForm"})(D),z=function(e){var t=e.modal,a=e.toggle;return Object(T.jsx)(y.a,{isOpen:t,toggle:a,className:"authorization-form-modal",children:Object(T.jsx)(w.a,{children:Object(T.jsx)(R,{})})})},I=function(){var e=Object(n.useState)(!1),t=Object(N.a)(e,2),a=t[0],c=t[1],r=function(){return c(!a)};return Object(T.jsxs)(T.Fragment,{children:[Object(T.jsxs)("div",{className:"authorization",children:[Object(T.jsx)("button",{onClick:r,className:"btn btn-outline-warning mr-2",children:"\u0412\u043e\u0439\u0442\u0438"}),Object(T.jsx)(z,{modal:a,toggle:r})]}),Object(T.jsx)("button",{className:"btn btn-outline-warning",children:Object(T.jsx)("a",{href:"https://www.themoviedb.org/signup",rel:"nofollow",target:"blank",children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"})})]})},L=function(){return Object(T.jsx)("div",{className:"header",children:Object(T.jsxs)("div",{className:"container d-flex align-items-center justify-content-between h-100 flex-column-reverse flex-md-row",children:[Object(T.jsxs)("div",{className:"col-xl-4 col-md-6 col-12 pb-1 mt-3 mt-md-0 d-flex justify-content-center align-items-baseline",children:[Object(T.jsxs)("a",{href:"/",className:"header__title",children:["Movie",Object(T.jsx)("span",{className:"header__sub-title",children:"searcher"})]}),Object(T.jsx)("a",{href:"https://www.themoviedb.org/",className:"header__with-api ml-2",rel:"nofollow",target:"blank",children:"with TMDB Api"})]}),Object(T.jsx)("div",{className:"col-12 mb-1 mt-2 mb-md-0 mt-md-0 col-md-3 d-flex justify-content-center",children:Object(T.jsx)(I,{})})]})})},M=a(263),H=Object(M.a)("ON_CHANGE_FILTERS",(function(e,t){return{name:e,value:t}})),P=Object(M.a)("RESET_FILTERS"),U=[{label:"\u041f\u043e\u043f\u0443\u043b\u044f\u0440\u043d\u044b\u0435 (\u0443\u0431\u044b\u0432\u0430\u043d\u0438\u0435)",value:"popularity.desc"},{label:"\u041f\u043e\u043f\u0443\u043b\u044f\u0440\u043d\u044b\u0435 (\u0432\u043e\u0437\u0440\u043e\u0441\u0442\u0430\u043d\u0438\u0435)",value:"popularity.asc"},{label:"\u0420\u0435\u0439\u0442\u0438\u043d\u0433 (\u0443\u0431\u044b\u0432\u0430\u043d\u0438\u0435)",value:"vote_average.desc"},{label:"\u0420\u0435\u0439\u0442\u0438\u043d\u0433 (\u0432\u043e\u0437\u0440\u043e\u0441\u0442\u0430\u043d\u0438\u0435)",value:"vote_average.asc"}],B=function(){var e=Object(s.c)();return Object(T.jsxs)("div",{className:"sort form-group",children:[Object(T.jsx)("label",{className:"filters-label",htmlFor:"sort_by",children:"\u0421\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c"}),Object(T.jsx)("select",{className:"form-control cursor-pointer",name:"sort_by",id:"sort_by",onChange:function(t){var a=t.target,n=a.name,c=a.value;e(H(n,c))},children:U.map((function(e){return Object(T.jsx)("option",{value:e.value,children:e.label},e.value)}))})]})},G=function(){var e=Object(s.d)((function(e){return e.filters})),t=Object(s.c)(),a=function(e){return function(){t(H("page",e))}};return Object(T.jsxs)("div",{className:"pagination form-group col-12 d-flex justify-content-center",children:[Object(T.jsx)("button",{type:"button",className:"btn btn-light col-4",onClick:a(+e.page-1),disabled:1===e.page,children:"\u041d\u0430\u0437\u0430\u0434"}),Object(T.jsx)("div",{className:"col-4 total-pages d-flex align-items-center",children:"".concat(e.page," \u0438\u0437 ").concat(e.total_pages)}),Object(T.jsx)("button",{type:"button",className:"btn btn-light col-4",onClick:a(+e.page+1),disabled:Number(e.page===e.total_pages),children:"\u0412\u043f\u0435\u0440\u0435\u0434"})]})},J=function(){var e=(new Date).getFullYear();return Array.from(new Array(70),(function(t,a){return e+2-a}))}(),Y=function(){var e=Object(s.d)((function(e){return e.filters})),t=Object(s.c)();return Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)("label",{className:"filters-second-label",htmlFor:"primary_release_year",children:"\u0414\u0430\u0442\u0430 \u0432\u044b\u0445\u043e\u0434\u0430"}),Object(T.jsx)("select",{className:"form-control",name:"primary_release_year",id:"primary_release_year",value:e.primary_release_year,onChange:function(e){var a=e.target,n=a.name,c=a.value;t(H(n,c))},children:J.map((function(e){return Object(T.jsx)("option",{value:e,children:e},e)}))})]})},W=a(118),q=a(54),K=a.n(q),Q="https://api.themoviedb.org/3",V="2bf9f43ff01f800a4b2838b95fcce99e",X=function(e){var t=e.genre,a=e.handeChange,n=Object(s.d)((function(e){return e.filters}));return Object(T.jsxs)("div",{className:"genres__item",children:[Object(T.jsx)("input",{type:"checkbox",value:t.id,checked:-1!==n.with_genres.indexOf(String(t.id)),className:"checkbox",name:"with_genres",id:t.id,onChange:a}),Object(T.jsx)("label",{className:"label",htmlFor:t.id,children:t.name})]})},Z=function(){var e=Object(n.useState)([]),t=Object(N.a)(e,2),a=t[0],c=t[1],r=Object(s.d)((function(e){return e.filters})),l=Object(s.c)();Object(n.useEffect)((function(){K.a.get("".concat(Q,"/genre/movie/list?api_key=").concat(V,"&language=").concat(r.language)).then((function(e){var t=e.data;return c(t.genres)}))}),[r.language]);var i=function(e){var t=e.target,a=t.name,n=t.value,c=-1===r.with_genres.indexOf(String(n))?[].concat(Object(W.a)(r.with_genres),[n]):r.with_genres.filter((function(e){return e!==n}));l(H(a,c))};return Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)("label",{className:"filters-second-label mt-3",htmlFor:"with_genres",children:"\u0416\u0430\u043d\u0440\u044b"}),Object(T.jsx)("div",{className:"genres",id:"with_genres",children:a.map((function(e){return Object(T.jsx)(X,{genre:e,handeChange:i},e.id)}))})]})},$=function(){var e=Object(s.c)();return Object(T.jsx)("button",{className:"btn btn-light col-12 mt-3 reset-filters",onClick:function(){e(P())},children:"\u0421\u0431\u0440\u043e\u0441\u0438\u0442\u044c \u0444\u0438\u043b\u044c\u0442\u0440\u044b"})},ee=function(){return Object(T.jsx)("div",{className:"filters",children:Object(T.jsxs)("form",{onSubmit:function(e){e.preventDefault()},children:[Object(T.jsx)(B,{}),Object(T.jsx)(G,{}),Object(T.jsxs)("div",{className:"sort form-group mt-4",children:[Object(T.jsx)("label",{className:"filters-label",htmlFor:"sort_by",children:"\u0424\u0438\u043b\u044c\u0442\u0440\u043e\u0432\u0430\u0442\u044c"}),Object(T.jsx)(Y,{}),Object(T.jsx)(Z,{}),Object(T.jsx)($,{})]})]})})},te=a.p+"static/media/not-found-poster.e6c7ea26.png",ae=function(e){var t=e.movie;return Object(T.jsxs)("div",{className:"movie-item ml-1 mr-1",children:[Object(T.jsx)("div",{className:"poster-image",children:Object(T.jsx)("img",{className:"image",src:t.poster_path?"".concat("https://image.tmdb.org/t/p/w500").concat(t.poster_path):te,alt:""})}),Object(T.jsxs)("div",{className:"desc",children:[Object(T.jsx)("p",{className:"vote-avarage",children:String(t.vote_average).substr(0,3)}),Object(T.jsx)("p",{className:"title",children:t.title}),Object(T.jsx)("p",{className:"release-date",children:function(){var e=new Date(t.release_date);return e.setDate(e.getDate()),String(e)}().substr(4,11)})]})]})},ne=function(){var e=Object(n.useState)([]),t=Object(N.a)(e,2),a=t[0],c=t[1],r=Object(s.d)((function(e){return e.filters}));return Object(n.useEffect)((function(){K.a.get("".concat(Q,"/discover/movie?api_key=").concat(V,"&language=").concat(r.language,"&sort_by=").concat(r.sort_by,"&primary_release_year=").concat(r.primary_release_year,"&with_genres=").concat(r.with_genres,"&page=").concat(r.page)).then((function(e){var t=e.data;c(t.results)})).catch((function(e){return console.log(e)}))}),[r.language,r.page,r.primary_release_year,r.sort_by,r.with_genres]),Object(T.jsx)("div",{className:"movies-container d-flex flex-wrap justify-content-center align-items-center",children:a.map((function(e){return Object(T.jsx)(ae,{movie:e},e.id)}))})},ce=function(){return Object(T.jsxs)("div",{className:"container d-flex mt-5 p-0 flex-md-row flex-column",children:[Object(T.jsx)("div",{className:"col-12 col-md-4 col-lg-3 mb-4 mb-md-0 p-0",children:Object(T.jsx)(ee,{})}),Object(T.jsx)("div",{className:"col-12 col-md-8 col-lg-9 p-1",children:Object(T.jsx)(ne,{})})]})},re=function(){return Object(n.useEffect)((function(){}),[]),Object(T.jsxs)(v.a,{basename:"/moviesearcher/",children:[Object(T.jsx)(L,{}),Object(T.jsx)(_.a,{path:"/",component:ce})]})};r.a.render(Object(T.jsx)(s.a,{store:x,children:Object(T.jsx)(re,{})}),document.getElementById("root"))}},[[255,1,2]]]);
//# sourceMappingURL=main.985751c3.chunk.js.map